{
  "version": "0.1.1-beta.5",
  "id": "@shopgate/search-fact-finder",
  "components": [],
  "configuration": {
    "baseUri": {
      "type": "bigApi",
      "destination": "backend",
      "default": null,
      "params": {
        "method": "GET",
        "service": "config",
        "path": "/v1/shop/%(shopId)s/sgc_ext_fact_finder_settings?parsed=true",
        "key": "value.merchantUrlWithoutAction"
      }
    },
    "httpUser": {
      "type": "bigApi",
      "destination": "backend",
      "default": null,
      "params": {
        "method": "GET",
        "service": "config",
        "path": "/v1/shop/%(shopId)s/sgc_ext_fact_finder_settings?parsed=true",
        "key": "value.httpUser"
      }
    },
    "httpPass": {
      "type": "bigApi",
      "destination": "backend",
      "default": null,
      "params": {
        "method": "GET",
        "service": "config",
        "path": "/v1/shop/%(shopId)s/sgc_ext_fact_finder_settings?parsed=true",
        "key": "value.httpPass"
      }
    },
    "username": {
      "type": "bigApi",
      "destination": "backend",
      "default": null,
      "params": {
        "method": "GET",
        "service": "config",
        "path": "/v1/shop/%(shopId)s/sgc_ext_fact_finder_settings?parsed=true",
        "key": "value.username"
      }
    },
    "password": {
      "type": "bigApi",
      "destination": "backend",
      "default": null,
      "params": {
        "method": "GET",
        "service": "config",
        "path": "/v1/shop/%(shopId)s/sgc_ext_fact_finder_settings?parsed=true",
        "key": "value.password"
      }
    },
    "authenticationType": {
      "type": "bigApi",
      "destination": "backend",
      "default": null,
      "params": {
        "method": "GET",
        "service": "config",
        "path": "/v1/shop/%(shopId)s/sgc_ext_fact_finder_settings?parsed=true",
        "key": "value.authenticationType"
      }
    },
    "authenticationPrefix": {
      "type": "bigApi",
      "destination": "backend",
      "default": null,
      "params": {
        "method": "GET",
        "service": "config",
        "path": "/v1/shop/%(shopId)s/sgc_ext_fact_finder_settings?parsed=true",
        "key": "value.authenticationPrefix"
      }
    },
    "authenticationPostfix": {
      "type": "bigApi",
      "destination": "backend",
      "default": null,
      "params": {
        "method": "GET",
        "service": "config",
        "path": "/v1/shop/%(shopId)s/sgc_ext_fact_finder_settings?parsed=true",
        "key": "value.authenticationPostfix"
      }
    },
    "encoding": {
      "type": "bigApi",
      "destination": "backend",
      "default": "utf8",
      "params": {
        "method": "GET",
        "service": "config",
        "path": "/v1/shop/%(shopId)s/sgc_ext_fact_finder_settings?parsed=true",
        "key": "value.encoding"
      }
    },
    "channel": {
      "type": "bigApi",
      "destination": "backend",
      "default": null,
      "params": {
        "method": "GET",
        "service": "config",
        "path": "/v1/shop/%(shopId)s/sgc_ext_fact_finder_settings?parsed=true",
        "key": "value.channel"
      }
    },
    "uidTemplate": {
      "type": "bigApi",
      "destination": "backend",
      "default": "{$.id}",
      "params": {
        "method": "GET",
        "service": "config",
        "path": "/v1/shop/%(shopId)s/sgc_ext_fact_finder_settings?parsed=true",
        "key": "value.productIdentifierTemplate"
      }
    },
    "sortPriceName": {
      "type": "bigApi",
      "destination": "backend",
      "default": "PREIS",
      "params": {
        "method": "GET",
        "service": "config",
        "path": "/v1/shop/%(shopId)s/sgc_ext_fact_finder_settings?parsed=true",
        "key": "value.sortPriceName"
      }
    }
  },
  "steps": [
    {
      "hooks": [
        "shopgate.catalog.getProducts.v1:before"
      ],
      "path": "@shopgate/search-fact-finder/lib/getProducts.search.js",
      "input": [
        {"key": "searchPhrase", "optional": true},
        {"key": "filters", "optional": true},
        {"key": "offset", "optional": true},
        {"key": "limit", "optional": true},
        {"key": "sort", "optional": true},
        {"key": "productIds", "optional": true},
        {"key": "skipHighlightLoading", "optional": true},
        {"key": "skipLiveshoppingLoading", "optional": true},
        {"key": "showInactive", "optional": true},
        {"key": "characteristics", "optional": true}
      ],
      "output": [
        {"key": "searchProductCount", "optional": true},
        {"key": "searchPhrase", "optional": true},
        {"key": "filters", "optional": true},
        {"key": "sort", "optional": true},
        {"key": "productIds", "optional": true}
      ]
    },
    {
      "hooks": [
        "shopgate.catalog.getProducts.v1:after"
      ],
      "path": "@shopgate/search-fact-finder/lib/getProducts.replaceTotalCount.js",
      "input": [
        {"key": "searchProductCount", "optional": true}
      ],
      "output": [
        {"key": "totalProductCount", "optional": true}
      ]
    }
  ]
}
